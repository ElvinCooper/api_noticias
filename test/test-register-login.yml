version: "1.0"
name: Test Registro y Login
config:
  http: {}
tests:
  register_and_login:
    name: Crear usuario y hacer login
    steps:
      - name: Registrar nuevo usuario
        http:
          url: http://127.0.0.1:5000/api/v1/usuarios
          method: POST
          headers:
            Content-Type: application/json
          json:
            email: "testuser${{random.uuid}}@example.com"  
            password: "testpass123"       
            nombre: "Usuario Test"
            telefono: "123456789012"
          check:
            status: 201 
          extract:
            email: $.email  
      # - name: Login del usuario creado
      #   http:
      #     url: http://127.0.0.1:5000/api/v1/usuarios/login
      #     method: POST
      #     headers:
      #       Content-Type: application/json
      #     json:
      #       email: "${{steps[0].email}}"
      #       password: "testpass123"
      #     check:
      #       status: 200